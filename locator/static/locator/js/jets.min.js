/*! Jets.js - v0.10.0 - 2016-07-21
* http://NeXTs.github.com/Jets.js/
* Copyright (c) 2015 Denis Lukov; Licensed MIT */

;(function(g,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):g.Jets=b()})(this,function(){function g(b){if(!(this instanceof g))return new g(b);var a=this;["searchTag","contentTag"].forEach(function(c){var d=c.replace("Tag","");a[d+"_tag"]=document["querySelector"+("contentTag"==c?"All":"")](b[c]);a[d+"_param"]=b[c];if(!a[d+"_tag"])throw Error("Error! Could not find "+c+" element");});var c={searchSelector:"*AND",hideBy:"display:none",
diacriticsMap:{}};a.options={};"columns addImportant searchSelector hideBy manualContentHandling callSearchManually diacriticsMap didSearch invert".split(" ").forEach(function(d){a.options[d]=b[d]||c[d]});if(1<this.options.searchSelector.length){var d=a.options.searchSelector.trim();a.options.searchSelector=d.substr(0,1);a.options.searchSelectorMode=d.substr(1).toUpperCase()}var e;a.search=function(){e!=(e=a.search_tag.value)&&(a._applyCSS(),a.options.didSearch&&a.options.didSearch(a.search_tag.value))};
a._onSearch=function(b){if("keydown"==b.type)return setTimeout(a.search,0);a.search()};a.destroy=function(){a.options.callSearchManually||a._processEventListeners("remove");a._destroy()};a.options.callSearchManually||a._processEventListeners("add");a._addStyleTag();a._setJets();a._applyCSS()}g.prototype={constructor:g,_processEventListeners:function(b){["input","keydown","change"].forEach(function(a){this.search_tag[b+"EventListener"](a,this._onSearch)}.bind(this))},_applyCSS:function(){for(var b=
this.options,a=this.replaceDiacritics(this.search_tag.value.trim().toLowerCase().replace(/\s\s+/g," ")),c=b.searchSelectorMode?a.split(" ").filter(function(a,b,c){return c.indexOf(a)==b}):[a],d="AND"==b.searchSelectorMode,e=[],h=0,f=c.length;h<f;h++)e.push((d?this.content_param+">":"")+(b.invert?"":":not(")+"[data-jets"+b.searchSelector+'="'+c[h]+'"]'+(b.invert?"":")"));c=b.hideBy.split(";").filter(Boolean).map(function(a){return a+(b.addImportant?"!important":"")});d=(d?"":this.content_param+">")+
e.join(d?",":"")+"{"+c.join(";")+"}";this.styleTag.innerHTML=a.length?d:""},_addStyleTag:function(){this.styleTag=document.createElement("style");document.head.appendChild(this.styleTag)},_getText:function(b){return b&&(b.textContent||b.innerText)||""},_getContentTags:function(b){return Array.prototype.slice.call(this.content_tag).reduce(function(a,c){return a.concat(Array.prototype.slice.call(c.querySelectorAll(b||":scope > *")))},[])},_setJets:function(b,a){for(var c=this,d=c._getContentTags(a?
"":b),e,h=0,f;f=d[h];h++)if(!f.hasAttribute("data-jets")||a)e=this.options.manualContentHandling?this.options.manualContentHandling(f):c.options.columns&&c.options.columns.length?c.options.columns.map(function(a){return c._getText(f.children[a])}).join(" "):c._getText(f),f.setAttribute("data-jets",c.replaceDiacritics(e.trim().replace(/\s+/g," ").toLowerCase()))},replaceDiacritics:function(b){var a=this.options.diacriticsMap,c;for(c in a)if(a.hasOwnProperty(c))for(var d=0,e=a[c].length;d<e;d++)b=b.replace(new RegExp(a[c][d],
"g"),c);return b},update:function(b){this._setJets(":scope > :not([data-jets])",b)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var b=this._getContentTags(),a=0,c;c=b[a];a++)c.removeAttribute("data-jets")}};(function(b,a){try{b.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var e=a[c];a[c]=function(a){if(/(^|,)\s*:scope/.test(a)){var f=this.id;this.id="ID_"+Date.now();a=a.replace(/((^|,)\s*):scope/g,"$1#"+
this.id);a=b[c](a);this.id=f;return a}return e.call(this,a)}})}})(window.document,Element.prototype);return g});